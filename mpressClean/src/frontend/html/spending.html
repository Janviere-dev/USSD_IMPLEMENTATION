<!--
MoMo Press transaction budget and spending breakdown page

Includes:
    - header
    - spending breakdown
    - budget limits
    - alert messages
    - modal settings panel
    - dark mode toggle
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Spending Breakdown - MoMo Press</title>
    <link rel="stylesheet" href="../css/spending.css" />
    <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
</head>
<body>
<div class="app-bg">
    <div class="app-container">

        <!-- header -->
        <div class="top-header">
            <div class="brand-label">m-press</div>
            <button class="settings-btn" id="settings-btn" aria-label="Settings">
                <i class="fa-solid fa-cog"></i>
            </button>
        </div>

        <!-- content -->
        <div class="app-content-wrapper">
            <!-- title -->
            <div class="title-row">
                <div class="title-text-group">
                    <div class="screen-indicator active">Spending Breakdown</div>
                    <div class="sub-title-text"><small>Where your money goes</small></div>
                </div>
                <!-- download button -->
                <button class="download-btn" id="download-analytics">
                    <i class="fa-solid fa-download"></i> Download Analytics
                </button>
                <!-- settings buttons -->
                <button
                        class="settings-btn2"
                        id="settings-btn2"
                        aria-label="Budget Settings"
                >
                    <i class="fa-solid fa-cog"></i>
                </button>
            </div>

            <!-- total spent summary -->
            <section class="spent-card">
                <div class="spent-label"> Total Spent This Month</div>
                <div class="spent-amount" id="spent-amount">RWF 0</div>
                <div class="progress-desc">Track your MoMo spending</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
            </section>

            <!-- donut chart -->
            <section class="donut-card">
                <canvas id="donutChart" width="180" height="180"></canvas>
                <div class="donut-legend-row two-column-legend">
                    <div class="legend-row">
                        <span class="legend-dot" style="background:#FFD600"></span> Money
                        Transfers
                    </div>
                    <div class="legend-row">
                        <span class="legend-dot" style="background:#00D48E"></span> Airtime
                        & Data
                    </div>
                    <div class="legend-row">
                        <span class="legend-dot" style="background:#FFA600"></span> Merchant
                        Payments
                    </div>
                    <div class="legend-row">
                        <span class="legend-dot" style="background:#6FC1FF"></span> Utilities &
                        Bills
                    </div>
                </div>
            </section>

            <section class="category-details-container">
                <div class="category-details-title">Category Details</div>
                <section class="category-details" id="category-details"></section>
            </section>

            <!-- bottom nav screens links -->
            <nav class="bottom-nav">
                <a href="home.html" class="bottom-nav-link inactive">
                    <i class="fa-solid fa-house"></i>
                    <span><small>Home</small></span>
                </a>
                <a href="send.html" class="bottom-nav-link inactive">
                    <i class="fa-solid fa-paper-plane"></i>
                    <span><small>Send</small></span>
                </a>
                <a href="spending.html" class="bottom-nav-link active-nav active" href="spending.html">
                    <i class="fa-solid fa-chart-pie"></i>
                    <span><small>Spending</small></span>
                </a>
                <a href="history.html" class="bottom-nav-link inactive">
                    <i class="fa-solid fa-clock-rotate-left"></i>
                    <span><small>History</small></span>
                </a>
            </nav>
        </div>

        <!-- main settings modal overlay & panel -->
        <div
                class="settings-backdrop"
                id="settings-backdrop"
                style="display:none"
        ></div>
        <div class="settings-modal" id="settings-modal" style="display:none">
            <div class="settings-header">
                <span>Settings</span>
                <button
                        id="close-settings"
                        class="close-settings-btn"
                        aria-label="Close"
                >
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>
            <div class="settings-body">
                <div class="feature-group">
                    <div class="feature-title">Spending Breakdown</div>
                    <label class="switch">
                        <input type="checkbox" id="spending-toggle" checked />
                        <span class="slider round"></span>
                    </label>
                    <div class="feature-description">
                        Show detailed category spending analysis
                    </div>
                </div>
                <div class="feature-group">
                    <div class="feature-title">Dark Mode</div>
                    <label class="switch">
                        <input type="checkbox" id="theme-toggle" aria-label="Toggle Dark Mode" />
                        <span class="slider round"></span>
                    </label>
                    <div class="feature-description">Switch to dark theme</div>
                </div>
                <button id="logout-btn" class="logout-btn">
                    <i class="fa-solid fa-right-from-bracket"></i> Log out
                </button>
                <div class="about-mo-mo">
                    MoMo Press v1.0<br /><span class="about-desc"
                >Track your MoMo spending and manage your finances</span
                >
                </div>
            </div>
        </div>

        <!-- budget limits settings modal -->
        <div
                class="budget-modal-backdrop"
                id="budgetBackdrop"
                style="display:none"
        ></div>
        <div class="budget-modal" id="budgetModal" style="display:none">
            <div class="budget-modal-content">
                <h3>Budget Limits & Controls</h3>
                <p>
                    Set spending limits, block categories, and configure emergency plans
                </p>
                <div class="budget-category-container" id="budgetCategoryControls"></div>
                <div class="budget-modal-actions">
                    <button id="budgetCancel">Cancel</button>
                    <button id="budgetSave">Save</button>
                </div>
            </div>
        </div>

        <!-- alert injection root -->
        <div id="spending-alert-root"></div>
    </div>
</div>
<script src="js/database.js"></script>
<script src="js/spending.js"></script>
</body>
</html>

